<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam con Overlay de Rostro</title>
    <style>
        /* === Estilos Generales === */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: sans-serif;
        }

        /* === Contenedor de la C√°mara y el Overlay === */
        .camera-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            /* Mantenemos el aspect-ratio para que el SVG no se deforme */
            aspect-ratio: 4 / 3; 
        }

        /* === Elemento de Video (C√°mara) === */
        #camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Asegura que el video llene el contenedor */
            display: block;
            transform: scaleX(-1); /* Reflejo opcional */
        }

        /* === El Overlay SVG (Reemplaza al div) === */
        #overlay-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
        }

    </style>
</head>
<body>

    <h1>Coloca tu rostro en el √≥valo üë§</h1>
    
    <div class="camera-container">
        
        <video id="camera-preview" autoplay playsinline></video>

        <svg id="overlay-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
            
            <path fill-rule="evenodd" 
                  fill="rgba(255, 255, 255, 0.85)"
                  d="M 0 0 H 100 V 100 H 0 Z 
                     M 50 30 
                     A 15 20 0 1 1 50 70 
                     A 15 20 0 1 1 50 30 Z">
            </path>
            
            <path fill="none"
                  stroke="#007bff"
                  stroke-width="0.5"
                  stroke-dasharray="2 2"
                  d="M 50 30 
                     A 15 20 0 1 1 50 70 
                     A 15 20 0 1 1 50 30 Z">
            </path>
        </svg>

    </div>

    <script>
        // === JavaScript (SIN CAMBIOS) ===
        const videoElement = document.getElementById('camera-preview');
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                videoElement.srcObject = stream;
                videoElement.play();
                console.log("C√°mara iniciada con overlay de rostro (√≥valo).");
            } catch (error) {
                console.error("Ocurri√≥ un error al acceder a la c√°mara: ", error);
                const container = document.querySelector('.camera-container');
                const errorMessage = document.createElement('p');
                errorMessage.style.color = 'red';
                errorMessage.textContent = '‚ùå Error: Aseg√∫rate de tener c√°mara y otorgar permisos.';
                container.parentNode.insertBefore(errorMessage, container.nextSibling); 
            }
        }
        startCamera();
    </script>
</body>
</html>