<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam con Overlay de √ìvalo</title>
    <style>
        /* === Estilos Generales === */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: sans-serif;
        }

        /* === Contenedor de la C√°mara y el Overlay === */
        /* Usamos position: relative para que el overlay se posicione relativo a √©l */
        .camera-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Mantiene el ancho m√°ximo */
            /* La altura se ajustar√° autom√°ticamente con el video */
            overflow: hidden; /* Importante para contener el video */
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* === Elemento de Video (C√°mara) === */
        #camera-preview {
            width: 100%;
            display: block; /* Elimina espacio extra debajo del video */
            transform: scaleX(-1); /* Reflejo opcional */
        }

        /* === El Overlay (M√°scara) === */
        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Utilizamos 'pointer-events: none' para permitir al usuario interactuar */
            /* si hubiera botones debajo del overlay, pero no con el overlay en s√≠. */
            pointer-events: none;
        }

        /* === El Estilo de M√°scara Oscura y √ìvalo Perforado === */
        /* === El Estilo de M√°scara Oscura y √ìvalo Perforado === */
        .mask-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Esto es el truco: una sombra gigante y desenfocada que cubre todo el elemento */
            box-shadow: 0 0 0 9999px rgba(255, 255, 255, 0.85); /* Fondo blanco semitransparente */
            /* Propiedad para darle forma de √≥valo al "agujero" */
            border-radius: 50%; 

            /* *************************************************** */
            /* ** CAMBIOS CLAVE: √ìvalo m√°s ajustado al rostro ** */
            /* *************************************************** */
            
            /* Ancho m√°s estrecho: 35% del contenedor */
            width: 35%; 
            /* Altura mayor: 80% del contenedor */
            height: 80%;
            
            /* Recalculamos la posici√≥n para centrarlo: */
            
            /* TOP: (100% - 80% de altura) / 2 = 10% */
            top: 10%; 
            /* LEFT: (100% - 35% de ancho) / 2 = 32.5% */
            left: 32.5%; 

            /* Estilo para el borde del √≥valo */
            border: 3px dashed #007bff; /* Borde punteado azul */
            box-sizing: border-box; /* Incluye el borde dentro de las dimensiones */
        }

    </style>
</head>
<body>

    <h1>Coloca tu rostro en el √≥valo üë§</h1>
    
    <div class="camera-container">
        <video id="camera-preview" autoplay playsinline></video>

        <div id="overlay">
            <div class="mask-frame"></div>
        </div>
    </div>

    <script>
        // === JavaScript: Mantenemos el mismo c√≥digo para iniciar la c√°mara ===

        const videoElement = document.getElementById('camera-preview');

        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                videoElement.srcObject = stream;
                videoElement.play();
                console.log("C√°mara iniciada con overlay.");

            } catch (error) {
                console.error("Ocurri√≥ un error al acceder a la c√°mara: ", error);
                
                const container = document.querySelector('.camera-container');
                const errorMessage = document.createElement('p');
                errorMessage.style.color = 'red';
                errorMessage.textContent = '‚ùå Error: Aseg√∫rate de tener c√°mara y otorgar permisos.';
                container.parentNode.insertBefore(errorMessage, container.nextSibling); 
            }
        }

        // Ejecutamos la funci√≥n
        startCamera();

    </script>
</body>
</html>